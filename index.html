<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Investimentos</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap">
  <style>
    html,
    * {
      font-family: 'Poppins', sans-serif;
    }

    body {
      background-color: #1a202c;
      color: #cbd5e0;
    }

    @media (max-width: 640px) {
      .container {
        padding: 0 1rem;
      }

      h1 {
        font-size: 1.25rem;
      }

      h2 {
        font-size: 1.5rem;
      }

      h3 {
        font-size: 1rem;
      }

      p {
        font-size: 0.875rem;
      }

      button {
        font-size: 0.875rem;
      }
    }
  </style>
</head>

<body>
  <div class="container mx-auto mt-12 max-w-lg px-4" id="app">
    <div class="flex flex-col items-center mb-10">
      <img src="./pix.png" alt="QR Code para doações via Pix" class="w-20 h-20 mb-4" />
      <p class="text-xs text-gray-400 text-center">Se você gostou deste projeto e deseja apoiar, considere fazer uma
        doação
        via Pix. A sua contribuição nos ajuda
        a manter o projeto e a criar mais conteúdo gratuito para a comunidade.</p>
    </div>
    <div class="text-center">
      <h1 class="text-xl">Calculadora de Investimentos</h1>
    </div>
    <form id="investment-form" class="mt-6">
      <div class="mb-4">
        <label for="investment" class="block text-sm">Investimento inicial</label>
        <input type="number" id="investment" required class="w-full px-3 py-2 bg-gray-700 text-white rounded" />
      </div>
      <div class="mb-4">
        <label for="monthly_income" class="block text-sm">Rendimento percentual mensal (em %)</label>
        <input type="number" id="monthly_income" required min="1" max="100" step="1"
          class="w-full px-3 py-2 bg-gray-700 text-white rounded" />
      </div>
      <div class="mb-4">
        <label for="months" class="block text-sm">Meses</label>
        <input type="number" id="months" required class="w-full px-3 py-2 bg-gray-700 text-white rounded" />
      </div>
      <button type="submit" class="w-full py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
        Calcular
      </button>
    </form>
    <div class="section mt-6" id="results"></div>
  </div>

  <script src="./script.js"></script>
  <script>
    const toCurrency = v => {
      return v.toLocaleString('pt-BR', {
        style: 'currency',
        currency: 'BRL',
      });
    };
    document
      .getElementById('investment-form')
      .addEventListener('submit', async function (event) {
        event.preventDefault();

        const investment = document.getElementById('investment').value;
        const monthly_income =
          document.getElementById('monthly_income').value;
        const months = document.getElementById('months').value;
        const investmentValue = Number(investment);
        const monthlyIncomeValue = Number(monthly_income) / 100;
        const monthsValue = Number(months);

        const data = calculateInvestment(investmentValue, monthlyIncomeValue, monthsValue);
        displayResults(data);
      });

    function displayResults(data) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = `
            <h2 class="text-center text-2xl font-bold mb-4">Resultados</h2>
            <div class="p-6 bg-teal-600 text-white rounded-lg shadow-lg">
            <p class="text-lg"><strong>Dividendo Total:</strong> ${toCurrency(data.total_dividend)}</p>
            <p class="text-lg"><strong>Total:</strong> ${toCurrency(data.total)}</p>
            </div>
            <h3 class="text-center text-lg mt-4">Previsões</h3>
            <ul class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            ${data.predictions
          .map(
            (prediction) => `
              <li class="p-4 bg-gray-700 text-white rounded">
              <span class="block font-bold">Mês: ${prediction.month}</span>
              <p>
              <strong>Dividendo:</strong> ${toCurrency(prediction.dividend)}<br>
              <strong>Total:</strong> ${toCurrency(prediction.total)}
              </p>
              </li>
              `
          )
          .join('')}
            </ul>
        `;
    }
  </script>
</body>

</html>